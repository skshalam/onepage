// Upload Profile Pic Component
// CHILD
import { Avatar } from 'antd';
import React, { useContext } from 'react';
import ThemeContext from '../Providers/Contexts/ThemeContext';

function UploadProfilePic({ imageUrl, file }) {
    // URL - set function to return the base64Url to parent component state,
    // file - image url state from the parent component
    const { useThemeStyles } = useContext(ThemeContext)
    const handleFileChange = (event) => {

        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = () => {
                imageUrl(reader.result);
            };
            reader.onerror = (error) => {
                console.error('Error reading file:', error);
            };
            reader.readAsDataURL(file);
        }
    };

    return (
        <>
            <label htmlFor="fileInput" className='position-relative profile-upload-in'>
                <Avatar size={66} src={file} />
                <div className='position-absolute pp-btn' style={{ ...custStyle.inputBtn }}>
                    <svg
                        width="32" height="32" viewBox="0 0 32 32" fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                        style={{ cursor: "pointer" }}>
                        <rect x="0.701294" y="0.227539"
                            width="30.8718" height="30.8504" rx="4" fill={useThemeStyles.primary_color} />
                        <path d="M22.1322 14.9288C21.9162 14.9288 21.709 15.0146 21.5562 15.1674C21.4034 15.3202 21.3176 15.5274 21.3176 15.7435V16.0531L20.1118 14.8473C19.6861 14.425 19.1107 14.188 18.511 14.188C17.9113 14.188 17.3359 14.425 16.9102 14.8473L16.3399 15.4176L14.3195 13.3972C13.8878 12.9863 13.3146 12.7571 12.7186 12.7571C12.1226 12.7571 11.5495 12.9863 11.1178 13.3972L9.91207 14.6029V10.0407C9.91207 9.82468 9.9979 9.61746 10.1507 9.46468C10.3035 9.3119 10.5107 9.22606 10.7267 9.22606H16.4295C16.6456 9.22606 16.8528 9.14023 17.0056 8.98745C17.1583 8.83467 17.2442 8.62745 17.2442 8.41139C17.2442 8.19532 17.1583 7.9881 17.0056 7.83532C16.8528 7.68254 16.6456 7.59671 16.4295 7.59671H10.7267C10.0786 7.59671 9.4569 7.8542 8.99856 8.31255C8.54021 8.7709 8.28271 9.39254 8.28271 10.0407V19.8169C8.28271 20.4651 8.54021 21.0867 8.99856 21.5451C9.4569 22.0034 10.0786 22.2609 10.7267 22.2609H20.5029C21.1511 22.2609 21.7727 22.0034 22.2311 21.5451C22.6894 21.0867 22.9469 20.4651 22.9469 19.8169V15.7435C22.9469 15.5274 22.8611 15.3202 22.7083 15.1674C22.5555 15.0146 22.3483 14.9288 22.1322 14.9288ZM10.7267 20.6316C10.5107 20.6316 10.3035 20.5457 10.1507 20.3929C9.9979 20.2402 9.91207 20.0329 9.91207 19.8169V16.9085L12.2746 14.5459C12.3943 14.4319 12.5533 14.3682 12.7186 14.3682C12.884 14.3682 13.0429 14.4319 13.1626 14.5459L15.7452 17.1284L19.2483 20.6316H10.7267ZM21.3176 19.8169C21.3164 19.9728 21.265 20.1242 21.1709 20.2487L17.4967 16.5582L18.067 15.9879C18.1254 15.9283 18.1951 15.8809 18.2721 15.8486C18.349 15.8163 18.4316 15.7996 18.5151 15.7996C18.5985 15.7996 18.6811 15.8163 18.7581 15.8486C18.835 15.8809 18.9047 15.9283 18.9631 15.9879L21.3176 18.3586V19.8169ZM25.1547 7.83297L22.7107 5.38893C22.6332 5.31476 22.5418 5.25662 22.4418 5.21785C22.2435 5.13637 22.021 5.13637 21.8227 5.21785C21.7227 5.25662 21.6313 5.31476 21.5538 5.38893L19.1098 7.83297C19.0338 7.90893 18.9736 7.9991 18.9325 8.09835C18.8914 8.19759 18.8702 8.30396 18.8702 8.41139C18.8702 8.62834 18.9564 8.8364 19.1098 8.98981C19.2632 9.14321 19.4713 9.2294 19.6882 9.2294C19.9052 9.2294 20.1132 9.14321 20.2666 8.98981L21.3176 7.93073V12.4848C21.3176 12.7008 21.4034 12.9081 21.5562 13.0608C21.709 13.2136 21.9162 13.2995 22.1322 13.2995C22.3483 13.2995 22.5555 13.2136 22.7083 13.0608C22.8611 12.9081 22.9469 12.7008 22.9469 12.4848V7.93073L23.9978 8.98981C24.0736 9.06617 24.1637 9.12677 24.263 9.16813C24.3622 9.20949 24.4687 9.23079 24.5763 9.23079C24.6838 9.23079 24.7903 9.20949 24.8896 9.16813C24.9889 9.12677 25.079 9.06617 25.1547 8.98981C25.231 8.91407 25.2917 8.82397 25.333 8.72469C25.3744 8.62542 25.3957 8.51893 25.3957 8.41139C25.3957 8.30384 25.3744 8.19736 25.333 8.09808C25.2917 7.9988 25.231 7.9087 25.1547 7.83297Z" fill="white" />
                    </svg>

                </div>
            </label>
            <input style={{ ...custStyle.inputStyle }} type="file" id="fileInput" onInput={handleFileChange} />
        </>
    );
}

export default UploadProfilePic;
// Css Styles Object
const custStyle = {
    inputStyle: {
        display: "none",
    },
    inputBtn: {
        height: "30px",
        width: "30px",
        top: "45px",
        right: "-15px",
        borderRadius: "5px"
    },
}